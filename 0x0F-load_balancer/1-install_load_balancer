#!/usr/bin/env bash
install and configure HAproxy on your lb-01 server

sudo apt-get update -y
sudo apt-get install haproxy -y

# Backup HAproxy
sudo cp /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg.bak

# Edit HAproxy configuration
cat <<EOF | sudo tee /etc/haproxy/haproxy.cfg
frontend http_front
    bind *:80
    mode http
    default_backend web-servers
backend web-servers
    balance roundrobin
    server web-01 100.26.168.254:80 check
    server web-02 100.26.246.144:80 check
EOF

# Restart HAproxy
sudo service haproxy restart
